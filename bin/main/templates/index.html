<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
<meta charset="UTF-8">
<title>Index</title> 
<link rel="stylesheet" media="screen" th:href="@{/css/Modal.css}"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script th:inline="javascript" th:src="@{/js/GEO.js}"></script>
<script defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyABlqSxHcQF3ZT1Uyc2cEcidYHAOLhHfNY&callback=initMap"></script>	
<script src="https://unpkg.com/@googlemaps/markerclusterer/dist/index.min.js"></script>
</head>
<body>
	<th:block th:if="${name != null}">
		<h4><span th:text="${name}"></span>님 환영합니다.</h4>
	</th:block>
	
	<a sec:authorize="isAuthenticated()" th:href="@{board/boardlist}">게시판</a>
    </sec:authorize>
	<a sec:authorize="isAuthenticated()" th:href="@{planner/list}">계획서</a>
    </sec:authorize>
    <a sec:authorize="isAuthenticated()" th:href="@{members/mypage}">마이페이지</a>
    </sec:authorize>
	<a sec:authorize="isAuthenticated()" th:href="@{/members/logout}"> 로그아웃</a>
    </sec:authorize>
    <a sec:authorize="isAnonymous()" th:href="@{members/login}">로그인</a>
    </sec:authorize>
    <div id="map" style="height: 700px;"></div> 

  	<input type="button" id="delMark"  value="마커 삭제"/>
  	<input type="button" id="selDel"  value="선택 해제"/><br/>
  	
  	<form name="aData">
  		주변 정보<br/>
  		<th:block th:each="areaData : ${areaData}">
  			<input type="checkbox" th:name="areaData" name="areaData" id="areaData" th:value="${areaData.category}"/><span th:text="${areaData.category}">areaData</span>
		</th:block><br/>
		
		<button type="button" name="areaDataSet" id="areaDataSet">상권 찾기</button>
  	</form> 
  	<div id="modal" class="modal-overlay">
        <div class="modal-window">
            <div class="title">
                <h2>실시간 데이터</h2>
            </div>
            <div class="close-area">X</div>
            <div class="content">
            	<h3 id="areaName">지역이름</h3>
            	<h4 id="areaCongest">혼잡정도</h4>
            
            	<p>나이</p>
			  	<canvas id="bar-chart-horizontal" width="600" height="250"></canvas> 
			  	<p>성비</p>
			  	<canvas id="pieChart" width="300" height="300"></canvas> 
			  	<p>거주/비거주</p>
			  	<canvas id="resntChart" width="300" height="300"></canvas>
			  	<p>근처 교통 정보</p>
			  	<div id="map2" style="height: 400px;"></div>
            </div>
        </div>
    </div>
 
  	
  	
</body>
</html>